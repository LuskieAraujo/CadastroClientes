@model List<ClienteModel>
@{
	ViewData["Title"] = "Clientes";
}

<div class="text-center">
	<div class="row">
		<div class="form-group offset-10 col-2">
			<a type="button" class="btn btn-light" asp-route-id="0" asp-controller="Cliente" asp-action="Cliente">Novo</a>
		</div>
	</div>
	<div class="row">
		<div class="form-group col-4">
			<div class="input-group">
				<label class="col-form-label col-3 text-right">Nome</label>
				<input class="col-9 form-control" type="text" id="txtNomeCliente" />
			</div>
		</div>
		<div class="form-group col-4">
			<div class="input-group">
				<label class="col-form-label col-4 text-right">Documento</label>
				<input class="col-9 form-control" type="text" id="txtDocumentoCliente" />
			</div>
		</div>
		<div class="form-group offset-10 col-2">
			<button type="button" class="btn btn-light" asp-controller="Cliente" asp-action="Filtrar">Limpar Filtros</button>
			<button type="button" class="btn btn-dark" asp-controller="Cliente" asp-action="Filtrar">Filtrar</button>
		</div>
	</div>

	<table class="table table-hover table-sm">
		<thead class="thead-dark">
			<tr>
				<th scope="col" class="col-1">#</th>
				<th scope="col" class="col-4">Nome</th>
				<th scope="col" class="col-2">Documento</th>
				<th scope="col" class="col-2">Telefone</th>
				<th scope="col" class="col-2">Ações</th>
			</tr>
		</thead>
		<tbody>
			@if (Model != null && Model.Any())
			{
				int contador = 0;
				foreach (var cli in Model)
				{
					contador++;
					<tr>
						<th scope="row">@contador</th>
						<td>@cli.Nome</td>
						<td>@cli.Documento</td>
						<td>@cli.Telefone</td>
						<td>
							<div class="btn-group" role="group">
								<a type="button" class="btn btn-sm btn-secondary" asp-route-id="@cli.Id" asp-controller="Cliente" asp-action="Cliente">Editar</a>
								<button type="button" class="btn btn-sm btn-primary" data-toggle="modal" data-nome="@cli.Nome" data-id="@cli.Id" data-target="#modalApagar">Apagar</button>
							</div>
						</td>
					</tr>
				}
			}
		</tbody>
	</table>
</div>

<div class="modal" tabindex="-1" role="dialog" id="modalApagar">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title">Deletar cliente</h5>
			</div>
			<div class="modal-body">
				<p>Deseja realmente deletar este cliente?</p>
				<label type="text" id="lblNome"></label>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-sm btn-secondary" data-dismiss="modal">Não</button>
				<button type="button" id="btnApagar" class="btn btn-sm btn-dark" asp-route-id="" asp-controller="" asp-action="">Sim</button>
			</div>
		</div>
	</div>
</div>
@section Scripts {
	<script>
		var id;

		$('#modalApagar').on('show.bs.modal', function (event) {
			var button = $(event.relatedTarget);
			var modal = $(this);
			
			id = button.data('id');
			document.getElementById('lblNome').innerHTML = button.data('nome');
			modal.find('#btnApagar').attr('asp-route-id', id);
		});

		$('#btnApagar').click(function () {
			$.ajax({
				type: "POST",
				url: "/Cliente/Excluir",
				data: id,
				success: function (data) { alert("Deletado"); },
				error: function (data) { alert(response.responseText); }
			});
		});
	</script>
}

@* Enunciado:
Uma empresa contratou seus serviços e necessita que um sistema web seja desenvolvido para
que ela consiga cadastrar e visualizar todos os seus clientes. *@

@* Os dados necessários para o cadastro do cliente são os seguintes:
Nome; Tipo (PF / PJ); Documento (CNPJ / CPF); Data do Cadastro; Telefone. *@

@* Regras:
Todos os campos são obrigatórios.
O campo documento deve ter máscara e validação de acordo com o Tipo, ou seja, se no momento do cadastro o tipo selecionado for PF, o documento deve ter a máscara e validação de CPF, se o tipo selecionado for PJ o documento deve ter a máscara e validação de CNPJ.
A validação deve ser feita tanto no frontend quanto no backend. Na listagem de clientes deve ser possível filtrar os clientes por Nome e Documento. Deverá ser possível editar e remover os clientes cadastrados, no caso da remoção, deverá ser feito um soft delete. *@

@* Observações:
O site deverá ser desenvolvido com as seguintes tecnologias:
jQuery *@